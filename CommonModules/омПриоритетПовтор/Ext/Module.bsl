Функция ПолучитьКартинкуПриоритетаБольшая(Приоритет) Экспорт

	Запрос = Новый Запрос;
	
	Запрос = ПолучитьЗапрос(, Ложь);
	
	Запрос.УстановитьПараметр("Приоритет", Приоритет);
	
	Выборка = Запрос.Выполнить().Выбрать();
	
	Пока Выборка.Следующий() Цикл
		Возврат Выборка.Картинка;	
	КонецЦикла;
	
	Возврат Неопределено;
	
КонецФункции 

Функция ПолучитьКартинкуПриоритетаМалая(Приоритет) Экспорт

	Запрос = Новый Запрос;
	
	Запрос = ПолучитьЗапрос(Ложь);
	
	Запрос.УстановитьПараметр("Приоритет", Приоритет);
	
	Выборка = Запрос.Выполнить().Выбрать();
	
	Пока Выборка.Следующий() Цикл
		Возврат Выборка.Картинка;	
	КонецЦикла;
	
	Возврат Неопределено;
	
КонецФункции 
 
Функция ПолучитьЗапрос(БольшаяКартинка = Истина, МалаяКартинка = Истина)

	ЗапросТекст = 
		"ВЫБРАТЬ
		|	Приоритеты.СтатусПриоритета.БольшаяКартинка КАК Картинка
		|ИЗ
		|	Справочник.Приоритеты КАК Приоритеты
		|ГДЕ
		|	Приоритеты.Ссылка = &Приоритеты";
	
	Если БольшаяКартинка И НЕ МалаяКартинка Тогда
	
		Возврат ЗапросТекст;	
	
	ИначеЕсли БольшаяКартинка И НЕ МалаяКартинка Тогда
	
		Возврат СтрЗаменить(ЗапросТекст, 
		"Приоритеты.СтатусПриоритета.БольшаяКартинка КАК Картинка", 
		"Приоритеты.СтатусПриоритета.БольшаяКартинка КАК Картинка,	Приоритеты.СтатусПриоритета КАК МалаяКартинка");
	
	Иначе
	
		Возврат СтрЗаменить(ЗапросТекст, 
		"БольшаяКартинка", "МалаяКартинка");
	
	КонецЕсли;

КонецФункции // ПолучитьЗапрос()

Функция ПолучитьАвтораДляЗадачи(Проект, ОбъектЗадачи, стРезультат = Неопределено) Экспорт
	
	стРезультат = Новый Структура("Продолжительность", 0);
	
	Запрос = Новый Запрос;
	Запрос.Текст = 
		"ВЫБРАТЬ
		|	Проекты.Дизайнер КАК Дизайнер,
		|	Проекты.ВедущийКонструктор КАК ВедущийКонструктор,
		|	Проекты.Менеджер КАК Менеджер
		|ИЗ
		|	Справочник.Проекты КАК Проекты
		|ГДЕ
		|	Проекты.Ссылка = &Проект
		|;
		|
		|////////////////////////////////////////////////////////////////////////////////
		|ВЫБРАТЬ
		|	НазначениеАвтораДляЗадачи.Исполнитель КАК Исполнитель,
		|	НазначениеАвтораДляЗадачи.Продолжительность КАК Продолжительность
		|ИЗ
		|	Справочник.НазначениеАвтораДляЗадачи КАК НазначениеАвтораДляЗадачи
		|ГДЕ
		|	НазначениеАвтораДляЗадачи.ОбъектЗадачи = &ОбъектЗадачи";
	
	Запрос.УстановитьПараметр("ОбъектЗадачи", 	ОбъектЗадачи);
	Запрос.УстановитьПараметр("Проект", 		Проект);
	
	Результат = Запрос.ВыполнитьПакет(); 
	
	Дизайнер 			= Неопределено;
	ВедущийКонструктор 	= Неопределено;
	Менеджер 			= Неопределено;
	
	Выборка = Результат[0].Выбрать();             
	Пока Выборка.Следующий() Цикл
		
		Дизайнер 			= Выборка.Дизайнер;
		ВедущийКонструктор 	= Выборка.ВедущийКонструктор;
		Менеджер 			= Выборка.Менеджер;
		
	КонецЦикла;

	Исполнитель = Справочники.НазначениеАвтораДляЗадачи.ПустаяСсылка();
	
	Выборка = Результат[1].Выбрать();             
	Пока Выборка.Следующий() Цикл 
		
		стРезультат.Продолжительность 	= Выборка.Продолжительность; 
		Исполнитель 					= Выборка.Исполнитель;
		
	КонецЦикла;
	
	Если ОбъектЗадачи = Перечисления.ОбъектыЗадач.ДополнитьКартуПроектаДиз Тогда
		Исполнитель = ?(Дизайнер = Неопределено, Исполнитель, Дизайнер);
	ИначеЕсли ОбъектЗадачи = Перечисления.ОбъектыЗадач.ДополнитьКартуПроектаДиз Тогда
		Исполнитель = ?(Дизайнер = Неопределено, Исполнитель, Дизайнер);
	ИначеЕсли ОбъектЗадачи = Перечисления.ОбъектыЗадач.СоздатьКартуПроектаКон Тогда
		Исполнитель = ?(ВедущийКонструктор = Неопределено, Исполнитель, ВедущийКонструктор);
	ИначеЕсли ОбъектЗадачи = Перечисления.ОбъектыЗадач.ДополнитьКартуПроектаКон Тогда
		Исполнитель = ?(ВедущийКонструктор = Неопределено, Исполнитель, ВедущийКонструктор);
	ИначеЕсли ОбъектЗадачи = Перечисления.ОбъектыЗадач.СоздатьЗапускВРаботу Тогда
		Исполнитель = ?(ВедущийКонструктор = Неопределено, Исполнитель, ВедущийКонструктор);
	КонецЕсли;
	
	Возврат Исполнитель;
	
КонецФункции // ПолучитьАвтораДляЗадачи()
